import{b as k}from"./36.js";import"./6.js";import{a as s,b as C}from"./7.js";import{d as P,f as h}from"./8.js";import"./16.js";import"./35.js";import"./20.js";import"./14.js";import{c as d,f as x,j as M,l as _,n as b,o as S,p as O}from"./26.js";import"./43.js";import"./24.js";import"./27.js";import"./37.js";import"./25.js";import{e as y,f as R}from"./13.js";import"./52.js";import"./39.js";import"./17.js";import{a as v}from"./49.js";import{D as w,h as g}from"./40.js";import{Cb as a,Db as l,Eb as f,Mb as u,Ta as n,Z as o,fb as m,sb as r,ua as c}from"./33.js";var E=class p{loadingResetPassword=!1;token=c("");http=o(w);router=o(h);location=o(g);route=o(P);messageService=o(C);formBuilder=o(b);form=this.formBuilder.group({newPassword:["",[d.required]],confirmNewPassword:["",[d.required]]});formControls=this.form.controls;constructor(){this.route.queryParams.subscribe(i=>{let e=i.token;e&&(this.token.set(e),this.location.replaceState(this.router.url.split("?")[0]))})}resetPassword(){if(!this.form.invalid){if(this.formControls.newPassword.value!==this.formControls.confirmNewPassword.value){this.messageService.sendMessage(s.PASSWORD_MISMATCH);return}this.loadingResetPassword=!0,this.http.post(`${v.API_URL}/auth/reset-password`,{token:this.token(),newPassword:this.formControls.newPassword.value}).subscribe({next:()=>{this.messageService.sendMessage(s.PASSWORD_RESET_SUCCESS),setTimeout(()=>{this.router.navigate(["/"]),this.loadingResetPassword=!1},800)},error:()=>{this.messageService.sendMessage(s.PASSWORD_RESET_FAILED),this.loadingResetPassword=!1}})}}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=m({type:p,selectors:[["app-reset-password"]],decls:7,vars:5,consts:[[1,"auth-container"],[1,"form-container"],[1,"form-content",3,"formGroup"],["type","password","label","Password",3,"control"],["type","password","label","Confirm Password",3,"control"],[1,"buttons-container"],["label","Reset Password","icon","pi pi-refresh",3,"onClick","disabled","loading"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),f(3,"app-form-control",3)(4,"app-form-control",4),a(5,"div",5)(6,"p-button",6),u("onClick",function(){return t.resetPassword()}),l()()()()()),e&2&&(n(2),r("formGroup",t.form),n(),r("control",t.formControls.newPassword),n(),r("control",t.formControls.confirmNewPassword),n(2),r("disabled",t.form.invalid||t.loadingResetPassword)("loading",t.loadingResetPassword))},dependencies:[R,y,S,M,x,O,_,k],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;padding:40px 20px;box-sizing:border-box}.auth-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;width:100%;max-width:400px;background:#18181b6b;border:1px solid #dfe7ef;border-radius:8px;padding:40px;box-shadow:0 8px 32px #0000004d}.auth-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:22px;width:100%}.auth-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}@media (max-width: 768px){.auth-container[_ngcontent-%COMP%]{padding:20px 15px}.auth-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:400px;padding:30px 20px}.auth-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .google-button-container[_ngcontent-%COMP%]{margin-top:15px}}@media (max-width: 510px){.auth-container[_ngcontent-%COMP%]{justify-content:center}}[_nghost-%COMP%]{display:flex;justify-content:flex-end}@media screen and (max-width: 844px){[_nghost-%COMP%]{justify-content:center}}"]})};export{E as ResetPasswordComponent};
