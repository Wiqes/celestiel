import{a as ae,b as le}from"./chunk-WMK7MRLD.js";import{a as Z,c as J,d as G}from"./chunk-VMSOAOEQ.js";import{a as se}from"./chunk-VZIYANPV.js";import{d as q}from"./chunk-K5BU6CYA.js";import"./chunk-65LKHUET.js";import{b as ee,e as te,i as ie,m as ne,o as oe}from"./chunk-CSDCIWKT.js";import"./chunk-6C2J5BQ3.js";import"./chunk-APZXJAS2.js";import{d as re}from"./chunk-F6ROZQRG.js";import"./chunk-MAXMR2XW.js";import"./chunk-C4SRROBE.js";import{a as W,d as X}from"./chunk-AK7JGQEW.js";import{l as Q,m as x,t as _,w as Y}from"./chunk-ZXNNLAB3.js";import{Ab as p,Eb as O,Ib as w,Jb as c,N as S,Nb as I,Ob as k,Pb as V,R as E,Ra as a,Tb as f,Ua as z,Ub as F,Vb as B,W as L,X as d,Xb as j,Yb as A,Zb as K,cb as b,da as g,ea as u,hb as C,k as U,ob as l,qa as y,qb as R,sa as v,tc as h,ub as N,uc as $,wa as D,yb as r,zb as s}from"./chunk-QP7WRVZV.js";function he(n,e){n&1&&(r(0,"div",1)(1,"div",2)(2,"span"),f(3,"is typing"),s()(),r(4,"div",3),p(5,"div",4)(6,"div",4)(7,"div",4),s()())}var M=class n{isVisible=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-typing-indicator"]],inputs:{isVisible:"isVisible"},decls:1,vars:1,consts:[["class","typing-indicator",4,"ngIf"],[1,"typing-indicator"],[1,"typing-text"],[1,"typing-dots"],[1,"dot"]],template:function(t,i){t&1&&C(0,he,8,0,"div",0),t&2&&l("ngIf",i.isVisible)},dependencies:[_,x],styles:[".typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:#34f5f5;border-radius:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.typing-text[_ngcontent-%COMP%]{font-style:italic}.typing-dots[_ngcontent-%COMP%]{display:flex;gap:.2rem;position:relative;top:4px;left:-2px}.dot[_ngcontent-%COMP%]{width:2px;height:2px;border-radius:50%;background-color:#34f5f5;animation:_ngcontent-%COMP%_pulse 1.4s infinite ease-in-out}.dot[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.dot[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_pulse{0%,80%,to{transform:scale(.5);opacity:.3}40%{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]})};var P=class n{isTyping=y(!1);isOnline=y(!1);interlocutorProfile=y(null);interlocutorName=h(()=>this.interlocutorProfile()?.name||this.interlocutorProfile()?.email||"Unknown");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-chat-header"]],inputs:{isTyping:[1,"isTyping"],isOnline:[1,"isOnline"],interlocutorProfile:[1,"interlocutorProfile"]},decls:8,vars:4,consts:[[1,"header-avatar"],[3,"profile"],[1,"status-indicator",3,"isOnline"],[1,"header-info"],[1,"header-name"],[1,"header-status"],[3,"isVisible"]],template:function(t,i){t&1&&(r(0,"div",0),p(1,"app-chat-avatar",1)(2,"app-online-status",2),s(),r(3,"div",3)(4,"div",4),f(5),s(),r(6,"div",5),p(7,"app-typing-indicator",6),s()()),t&2&&(a(),l("profile",i.interlocutorProfile()),a(),l("isOnline",i.isOnline()),a(3),F(i.interlocutorName()),a(2),l("isVisible",i.isTyping()))},dependencies:[ae,M,le],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:10px 15px;background:#18181b6b;margin:0;border-bottom:1px solid #eee;min-height:60px}[_nghost-%COMP%]   .header-avatar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}[_nghost-%COMP%]   .header-avatar[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;z-index:1}[_nghost-%COMP%]   .header-info[_ngcontent-%COMP%]{margin-left:10px;flex-grow:1;display:flex;flex-direction:column;gap:2px}[_nghost-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-name[_ngcontent-%COMP%]{font-weight:900;font-size:20px;line-height:1.2}[_nghost-%COMP%]   .header-info[_ngcontent-%COMP%]   .header-status[_ngcontent-%COMP%]{font-size:12px;color:var(--text-color-secondary);font-weight:400}"]})};var T=class n{constructor(e){this.rendererFactory=e;this.renderer=this.rendererFactory.createRenderer(null,null),this.isBrowser=Y(this.platformId)}renderer;platformId=d(D);isBrowser;visualViewportHandler;initialViewportHeight;callbacks=new Set;initializeMobileViewportHandling(e){this.isBrowser&&(e&&this.callbacks.add(e),window.innerWidth<=768&&(this.initialViewportHeight=window.innerHeight,"visualViewport"in window&&window.visualViewport?(this.visualViewportHandler=()=>{this.handleViewportChange()},window.visualViewport.addEventListener("resize",this.visualViewportHandler)):(this.visualViewportHandler=()=>{this.handleViewportChange()},window.addEventListener("resize",this.visualViewportHandler)),this.setupTextareaListeners()))}setupTextareaListeners(){setTimeout(()=>{let e=document.querySelector("textarea");e&&(e.addEventListener("focus",()=>{setTimeout(()=>this.handleViewportChange(),300)}),e.addEventListener("blur",()=>{setTimeout(()=>this.handleViewportChange(),300)}))},1e3)}handleViewportChange(e="app-chat"){if(!this.isBrowser)return;let t=document.querySelector(e);if(!t)return;let i;"visualViewport"in window&&window.visualViewport?i=window.visualViewport.height:i=window.innerHeight,this.initialViewportHeight-i>150?this.applyKeyboardVisibleStyles(t,i):this.removeKeyboardVisibleStyles(t),this.callbacks.forEach(m=>m())}applyKeyboardVisibleStyles(e,t){this.renderer.setStyle(e,"height",`${t}px`),this.renderer.setStyle(e,"maxHeight",`${t}px`),this.renderer.addClass(e,"keyboard-visible"),this.renderer.setStyle(document.body,"overflowX","hidden"),this.renderer.setStyle(document.documentElement,"overflowX","hidden")}removeKeyboardVisibleStyles(e){this.renderer.removeStyle(e,"height"),this.renderer.removeStyle(e,"maxHeight"),this.renderer.removeClass(e,"keyboard-visible"),this.renderer.removeStyle(document.body,"overflowX"),this.renderer.removeStyle(document.documentElement,"overflowX")}addViewportChangeCallback(e){this.callbacks.add(e)}removeViewportChangeCallback(e){this.callbacks.delete(e)}isKeyboardVisible(){if(!this.isBrowser||!this.initialViewportHeight)return!1;let e;return"visualViewport"in window&&window.visualViewport?e=window.visualViewport.height:e=window.innerHeight,this.initialViewportHeight-e>150}getCurrentViewportHeight(){return this.isBrowser?"visualViewport"in window&&window.visualViewport?window.visualViewport.height:window.innerHeight:0}getInitialViewportHeight(){return this.initialViewportHeight||0}cleanup(e="app-chat"){if(!this.isBrowser)return;this.visualViewportHandler&&("visualViewport"in window&&window.visualViewport?window.visualViewport.removeEventListener("resize",this.visualViewportHandler):window.removeEventListener("resize",this.visualViewportHandler),this.visualViewportHandler=void 0);let t=document.querySelector(e);t&&this.removeKeyboardVisibleStyles(t),this.callbacks.clear()}triggerViewportChange(e="app-chat"){this.handleViewportChange(e)}static \u0275fac=function(t){return new(t||n)(L(z))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};var me=["messagesContainer"],ge=["messageInput"];function ue(n,e){n&1&&(r(0,"div",4),p(1,"app-loader"),s())}function fe(n,e){if(n&1&&(r(0,"div",12)(1,"div")(2,"div",13),f(3),s(),r(4,"div",14)(5,"small"),f(6),s()()()()),n&2){let t=e.$implicit,i=c(2);a(),R("sender",t.sender.id===i.currentUserId())("receiver",t.sender.id!==i.currentUserId()),a(2),B(" ",t.content," "),a(3),B(" ",i.formatMessageTime(t.timestamp)," ")}}function ve(n,e){if(n&1){let t=O();r(0,"button",15),w("click",function(){g(t);let o=c(2);return u(o.scrollToBottomManual())}),p(1,"i",16),s()}}function be(n,e){if(n&1){let t=O();p(0,"app-chat-header",5),r(1,"div",6,0),w("scroll",function(){g(t);let o=c();return u(o.onScroll())}),C(3,fe,7,6,"div",7),s(),r(4,"div",8)(5,"textarea",9,1),K("ngModelChange",function(o){g(t);let m=c();return A(m.newMessageContent,o)||(m.newMessageContent=o),u(o)}),w("keydown",function(o){g(t);let m=c();return u(m.onKeyPress(o))})("input",function(){g(t);let o=c();return u(o.onTyping())}),s(),r(7,"p-button",10),w("onClick",function(){g(t);let o=c();return u(o.sendMessage())})("onMouseDown",function(o){g(t);let m=c();return u(m.onSendButtonMouseDown(o))}),s()(),C(8,ve,2,0,"button",11)}if(n&2){let t=c();l("interlocutorProfile",t.interlocutorProfile())("isOnline",t.isOnline())("isTyping",t.getTypingIndicatorVisible()),a(3),l("ngForOf",t.messages)("ngForTrackBy",t.trackByMessageId),a(2),j("ngModel",t.newMessageContent),a(2),l("label","Send"),a(),l("ngIf",t.showScrollToBottom())}}var ce=class n{chatService=d(G);route=d(q);stateService=d(X);chatStateService=d(Z);destroy$=new U;viewportService=d(T);authTokenStateService=d(W);token=h(()=>this.authTokenStateService.token());interlocutorService=d(J);myProfile=h(()=>this.stateService.profile()||null);currentUserId=h(()=>this.myProfile()?.userId||"");interlocutor=h(()=>this.interlocutorService.interlocutor()||null);isOnline=h(()=>this.interlocutor()?.isOnline||!1);interlocutorProfile=h(()=>this.interlocutor()?.profile||null);receiverId="";messagesContainer;messageInput;messages=[];newMessageContent="";isLoading=v(!1);showScrollToBottom=v(!1);activeChatId=v("");isTyping=v(!1);typingUsers=v([]);typingTimeout;messageSubscription;previousMessagesSubscription;shouldScrollToBottom=!1;scrollTimeout;isUserScrolling=!1;constructor(){$(()=>{let e=this.token();e&&this.chatService.connect(e)})}ngOnInit(){this.viewportService.initializeMobileViewportHandling(()=>{this.viewportService.isKeyboardVisible()&&setTimeout(()=>{this.scrollToBottomSmooth()},100)}),this.route.paramMap.subscribe(e=>{this.receiverId=e.get("receiverId")||"",this.receiverId&&(this.isLoading.set(!0),this.chatService.isConnected()?this.startChatRoom():this.chatService.onConnect().pipe(S(this.destroy$)).subscribe(()=>{this.startChatRoom()}))})}startChatRoom(){this.joinChatRoom(),this.subscribeToMessages(),this.setupEnhancedSocketListeners()}setupEnhancedSocketListeners(){this.chatService.onUserTyping().pipe(S(this.destroy$)).subscribe(e=>{e.chatId===this.activeChatId()&&this.updateTypingUsers(e)})}updateTypingUsers(e){let t=this.typingUsers();e.isTyping?t.find(i=>i.userId===e.userId)||this.typingUsers.set([...t,e]):this.typingUsers.set(t.filter(i=>i.userId!==e.userId))}getTypingIndicatorVisible(){return this.typingUsers().length>0&&!this.typingUsers().some(e=>e.userId===this.currentUserId())}getTypingUsername(){return this.typingUsers().find(t=>t.userId!==this.currentUserId())?.username}onTyping(){this.activeChatId()&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyping()||(this.isTyping.set(!0),this.chatService.sendTypingIndicator(this.activeChatId(),!0)),this.typingTimeout=setTimeout(()=>{this.isTyping.set(!1),this.chatService.sendTypingIndicator(this.activeChatId(),!1)},1e3))}ngAfterViewChecked(){this.shouldScrollToBottom&&!this.isUserScrolling&&(this.scrollToBottomSmooth(),this.shouldScrollToBottom=!1)}scrollToBottomSmooth(){try{if(this.messagesContainer?.nativeElement){let e=this.messagesContainer.nativeElement;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}}catch(e){console.warn("Could not scroll to bottom:",e)}}scrollToBottom(){try{if(this.messagesContainer?.nativeElement){let e=this.messagesContainer.nativeElement;e.scrollTop=e.scrollHeight}}catch(e){console.warn("Could not scroll to bottom:",e)}}isNearBottom(){if(!this.messagesContainer?.nativeElement)return!1;let e=this.messagesContainer.nativeElement;return e.scrollTop+e.clientHeight>=e.scrollHeight-100}onScroll(){this.isUserScrolling=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout);let e=this.isNearBottom();this.showScrollToBottom.set(!e),this.scrollTimeout=setTimeout(()=>{this.isUserScrolling=!1,e&&(this.shouldScrollToBottom=!0)},150)}subscribeToMessages(){this.messageSubscription=this.chatService.onReceiveMessage().subscribe(e=>{let t=this.isNearBottom();console.log("Received message:",e),e.sender.id!==this.currentUserId()&&(this.messages=[...this.messages,e],this.updateChatUnreadCount()),(t||e.sender.id===this.currentUserId())&&(this.shouldScrollToBottom=!0)})}ngOnDestroy(){this.viewportService.cleanup(),this.isTyping()&&this.chatService.sendTypingIndicator(this.activeChatId(),!1),this.typingTimeout&&clearTimeout(this.typingTimeout),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.messageSubscription&&this.messageSubscription.unsubscribe(),this.previousMessagesSubscription&&this.previousMessagesSubscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.activeChatId()&&this.chatService.leaveChat(this.activeChatId())}joinChatRoom(){this.chatService.joinChat(Number(this.currentUserId()),Number(this.receiverId)).subscribe(e=>{console.log(`Joined chat with ID: ${e}`),this.activeChatId.set(e)}),this.previousMessagesSubscription=this.chatService.onPreviousMessages().subscribe(({messages:e,chat:t})=>{let i=t.participant1?.id===this.currentUserId()?t.participant2:t.participant1;i&&this.interlocutorService.interlocutor.set(i),console.log("Joined chat room:",t),this.messages=e,this.isLoading.set(!1),this.activeChatId.set(t.id),setTimeout(()=>{this.scrollToBottom(),this.showScrollToBottom.set(!1)},100)})}sendMessage(){if(console.log("Attempting to send message:",this.newMessageContent),this.newMessageContent.trim()&&this.currentUserId()&&this.receiverId){let e=this.newMessageContent.trim();console.log("Sending message:",`d${e}`),this.isTyping()&&(this.isTyping.set(!1),this.chatService.sendTypingIndicator(this.activeChatId(),!1),this.typingTimeout&&clearTimeout(this.typingTimeout)),this.newMessageContent="",this.messages.push({id:"",content:e,timestamp:new Date,sender:{id:this.currentUserId(),profile:this.myProfile()},receiver:{id:this.receiverId,profile:this.interlocutorProfile()}}),this.chatService.sendMessage({content:e,senderId:Number(this.currentUserId()),receiverId:Number(this.receiverId)}),this.shouldScrollToBottom=!0}}onSendButtonMouseDown(e){e.preventDefault()}updateChatUnreadCount(){this.activeChatId()&&this.chatStateService.markChatAsRead(this.activeChatId())}onKeyPress(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}formatMessageTime(e){let t=typeof e=="string"?new Date(e):e;return Math.abs(new Date().getTime()-t.getTime())/(1e3*60*60)<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})}trackByMessageId(e,t){return t.id||e}scrollToBottomManual(){this.isUserScrolling=!1,this.shouldScrollToBottom=!0,this.scrollToBottomSmooth()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-chat"]],viewQuery:function(t,i){if(t&1&&(I(me,5),I(ge,5)),t&2){let o;k(o=V())&&(i.messagesContainer=o.first),k(o=V())&&(i.messageInput=o.first)}},inputs:{receiverId:"receiverId"},decls:3,vars:2,consts:[["messagesContainer",""],["messageInput",""],[1,"chat-container"],["class","loader-container",4,"ngIf"],[1,"loader-container"],[3,"interlocutorProfile","isOnline","isTyping"],[1,"messages",3,"scroll"],["class","message",4,"ngFor","ngForOf","ngForTrackBy"],[1,"message-input"],["placeholder","Type your message...","rows","1","maxlength","322",3,"ngModelChange","keydown","input","ngModel"],["icon","pi pi-send","tabindex","-1",3,"onClick","onMouseDown","label"],["class","scroll-to-bottom-btn","title","Scroll to bottom",3,"click",4,"ngIf"],[1,"message"],[1,"message-content"],[1,"message-meta"],["title","Scroll to bottom",1,"scroll-to-bottom-btn",3,"click"],[1,"pi","pi-chevron-down"]],template:function(t,i){t&1&&(r(0,"div",2),C(1,ue,2,0,"div",3)(2,be,9,8),s()),t&2&&(a(),l("ngIf",!i.interlocutorProfile()||i.isLoading()),a(),N(i.interlocutorProfile()&&!i.isLoading()?2:-1))},dependencies:[_,Q,x,oe,ee,te,ne,ie,re,se,P],styles:['.receiver[_ngcontent-%COMP%]{background:radial-gradient(circle at 20% 30%,rgba(52,245,245,.5) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(52,211,245,.4) 0%,transparent 60%),radial-gradient(circle at 60% 80%,rgba(45,212,245,.4) 0%,transparent 55%),radial-gradient(circle at 30% 60%,rgba(16,185,245,.3) 0%,transparent 45%),linear-gradient(135deg,#18181b4d,#1a1a1d33,#1212144d,#1a1a1d33,#18181b4d);border:1px solid rgba(52,245,221,.1);box-shadow:0 8px 8px #0000004d}.sender[_ngcontent-%COMP%]{background:radial-gradient(circle at 20% 30%,rgba(52,245,221,.5) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(52,211,204,.4) 0%,transparent 60%),radial-gradient(circle at 60% 80%,rgba(45,212,191,.4) 0%,transparent 55%),radial-gradient(circle at 30% 60%,rgba(16,185,129,.3) 0%,transparent 45%),linear-gradient(135deg,#18181b4d,#1a1a1d33,#1212144d,#1a1a1d33,#18181b4d);border:1px solid rgba(52,245,221,.1);box-shadow:0 8px 8px #0000004d}.messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}[_nghost-%COMP%]{display:flex;justify-content:flex-end;width:100%;padding:55px 10px 10px;height:100%;overflow:hidden}@supports (height: 100dvh){[_nghost-%COMP%]{height:100dvh;min-height:100dvh}}@media screen and (max-width: 768px){[_nghost-%COMP%]{--keyboard-height: env(keyboard-inset-height, 0px);height:calc(100vh - var(--keyboard-height));height:calc(100dvh - var(--keyboard-height));max-height:calc(100vh - var(--keyboard-height));max-height:calc(100dvh - var(--keyboard-height));position:relative;contain:layout style paint}}.chat-container[_ngcontent-%COMP%]{width:100%;max-width:400px;border:1px solid #ccc;border-radius:8px;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;contain:layout style paint}.chat-container[_ngcontent-%COMP%]   .loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.messages[_ngcontent-%COMP%]{flex:1;padding:15px;overflow-y:auto;overflow-x:hidden;background:#18181b6b;scroll-behavior:auto;position:relative}.scroll-to-bottom-btn[_ngcontent-%COMP%]{position:absolute;bottom:80px;right:20px;width:40px;height:40px;border-radius:50%;background:#34f5dde6;border:none;color:#000;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000004d;transition:all .2s ease;z-index:10;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.scroll-to-bottom-btn[_ngcontent-%COMP%]:hover{background:#34f5dd;transform:translateY(-2px);box-shadow:0 4px 12px #0006}.scroll-to-bottom-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.scroll-to-bottom-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media screen and (max-width: 768px){.scroll-to-bottom-btn[_ngcontent-%COMP%]{bottom:100px;right:15px}.keyboard-visible[_nghost-%COMP%]   .scroll-to-bottom-btn[_ngcontent-%COMP%]{bottom:120px;transform:scale(.9)}}.message[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;color:#000;font-size:20px;font-weight:600}.message[_ngcontent-%COMP%]:last-child{margin-bottom:0}.message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:6px 8px 0 6px;border-radius:18px;word-wrap:break-word;position:relative}.sender[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;align-self:flex-end;margin-left:auto;border-bottom-right-radius:6px}.sender[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-3px;right:-4px;width:0;height:0;border:8px solid transparent;border-bottom-color:#44f8c6;border-right:none;border-bottom-right-radius:6px}.sender[_ngcontent-%COMP%]   .message-meta[_ngcontent-%COMP%]{text-align:right}.receiver[_ngcontent-%COMP%]{align-self:flex-start;margin-right:auto;border-bottom-left-radius:6px}.receiver[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-3px;left:-4px;width:0;height:0;border:8px solid transparent;border-bottom-color:#44c6d7;border-left:none;border-bottom-left-radius:6px}.receiver[_ngcontent-%COMP%]   .message-meta[_ngcontent-%COMP%]{text-align:left}.message-content[_ngcontent-%COMP%]{max-width:240px;margin-bottom:4px;word-wrap:break-word}.message-meta[_ngcontent-%COMP%]{width:auto;margin-bottom:4px;border:none!important;box-shadow:none!important;padding:0 8px 10px!important;display:flex;align-items:center;justify-content:space-between;gap:8px}.message-meta[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px!important;color:#ffffffb3;opacity:.8}.message-input[_ngcontent-%COMP%]{display:flex;padding:4px;border-top:1px solid #eee;background:#18181b6b;gap:10px;align-items:center}.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex-grow:1;padding:4px;resize:none;border-radius:6px;min-height:44px;max-height:120px;font-family:inherit;font-size:14px;background:#0004;transition:border-color .2s ease}.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#34f5dd;box-shadow:0 0 0 2px #007bff40}.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#999}@media screen and (max-width: 768px){.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-overflow-scrolling:touch;transform:translateZ(0);-webkit-transform:translateZ(0);width:100%;max-width:100%;box-sizing:border-box}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){[_nghost-%COMP%]{padding:50px 5px 5px;min-width:0;max-width:100vw}.chat-container[_ngcontent-%COMP%]{max-width:100%;border-radius:0;border-left:none;border-right:none;min-width:0;width:100%}.messages[_ngcontent-%COMP%]{min-width:0;max-width:100%;word-wrap:break-word;overflow-wrap:break-word}.message-content[_ngcontent-%COMP%]{max-width:calc(100vw - 80px);min-width:0;word-wrap:break-word;overflow-wrap:break-word;hyphens:auto}.message-input[_ngcontent-%COMP%]{min-width:0}.message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-width:0;max-width:100%;box-sizing:border-box}}@media screen and (max-width: 768px){@supports (height: 100dvh){[_nghost-%COMP%]{--visual-viewport-height: 100dvh;height:var(--visual-viewport-height);min-height:var(--visual-viewport-height)}}@supports not (height: 100dvh){[_nghost-%COMP%]{height:100vh;min-height:100vh;padding-bottom:max(env(safe-area-inset-bottom),10px)}}.keyboard-visible[_nghost-%COMP%]{transition:height .2s ease-out}.keyboard-visible[_nghost-%COMP%]   .chat-container[_ngcontent-%COMP%]{height:100%}.keyboard-visible[_nghost-%COMP%]   .chat-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{scroll-behavior:smooth}.keyboard-visible[_nghost-%COMP%]   .chat-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:10}.keyboard-visible[_nghost-%COMP%]   .chat-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px;transform:translateZ(0);-webkit-transform:translateZ(0)}}@media screen and (max-width: 768px){[_nghost-%COMP%]{max-width:100vw;overflow-x:hidden}@supports (-webkit-touch-callout: none){[_nghost-%COMP%]{height:-webkit-fill-available;min-height:-webkit-fill-available}}}']})};export{ce as ChatComponent};
